{% extends "Shifts/layout.html" %}

{% block body %}



    <!--displaying Error messages-->
    {% if messages %}
                
    {% for message in messages %}


    <div class="alert alert-danger text-center" role="alert">
        {{message}} 

    </div>

    {% endfor %}       


    {% endif %}

    <div class="container bg-light justify-content-center  border border-top-0  border-secondary rounded   " style="max-width: 800px;">
       
   

    
    <script>
        
        const DAYS =[
             "Sunday",
             "Monday",
              "Tuesday",
              "Wednesday",
              "Thursday",
              "Friday",
              "Saturday",
              ]
        
        
       //takes dayIndex from sunday(0) to saturday(6)
        function nextDate(dayIndex) {
            var today = new Date();
            today.setDate(today.getDate() + (dayIndex - 1 - today.getDay() + 7) % 7 + 1);
            return today;
        }

        //displays date for next week
        document.addEventListener("DOMContentLoaded",()=>{
            var next_week = nextDate(0);
            //var nextWeekFrom = new Date(date.setDate(nextWeekStart));
            for (let i = 0; i < DAYS.length; ++i) { 
                
                document.getElementById(`${DAYS[i]} first`).innerHTML =next_week.toLocaleString('he-IL',{year: 'numeric', month: 'numeric', day: 'numeric'});
                //loop next week 
                next_week.setDate(next_week.getDate() + 1);
              
              }
            }
        
        )
    </script>

            <form action="{% url 'Shifts:addshifts' %}" method ="post">
                {% csrf_token %}   
                
                <div class="row ">
                        {% for field in form %}   

                        {% if "first" in field.label %}
                            <div class="col-sm-12 p-1 mx-auto border-bottom border-info ">
                                <p class="text-center h4 fst-italic " id="{{field.label}}"> Date</p>
                            </div>   
                        {% endif %}

                        <div class="col-sm-6 pl-3  d-flex  border-bottom border-info   ">
                            <div class="col-sm-3  fw-bolder text-dark text-center mx-auto">
                                {{ field.label }}
                               
                            </div>

                            <div class="col-sm-3 py-2 mx-auto ">
                                {{ field }}
                            </div>
                                 
                        </div>
                        {% endfor %}
                </div>
                
                <div class="d-flex justify-content-center" >

                       <button type="submit" class="btn btn-primary m-2">Submit</button>

                </div>
                
            </form>

       
   </div>     
  
{% endblock %}